# 部署检查清单

## ✅ 步骤 1：本地测试部署（已完成）

- [x] 所有测试通过（180 个测试）
- [x] 编译成功
- [x] 本地部署脚本测试成功
- [x] 部署信息保存到 `deployments/hardhat.json`

**部署结果：**
- ✅ Vault: `0x5FbDB2315678afecb367f032d93F642f64180aa3`
- ✅ PoolManager: `0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512`
- ✅ Router: `0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0`
- ✅ Timelock: `0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9`

---

## 📋 步骤 2：BSC 测试网部署准备

### 2.1 环境配置检查

- [ ] 创建 `.env` 文件
- [ ] 配置 `BSC_TESTNET_RPC`
- [ ] 配置 `PRIVATE_KEY`（测试账户）
- [ ] 配置 `BSCSCAN_API_KEY`（可选）

### 2.2 账户准备

- [ ] 准备测试网账户
- [ ] 检查账户余额（需要至少 0.1 BNB）
- [ ] 从 [BSC Faucet](https://testnet.bnbchain.org/faucet-smart) 获取测试币

### 2.3 部署命令

```bash
cd packages/contracts
pnpm deploy:testnet
```

### 2.4 部署后验证

- [ ] 验证所有合约地址
- [ ] 在 BSCScan 测试网验证合约代码
- [ ] 测试创建池子
- [ ] 测试添加流动性
- [ ] 测试 Swap 功能

---

## 📋 步骤 3：BSC 主网部署准备

### 3.1 最终检查清单

- [x] 所有测试通过
- [x] 安全审计完成
- [x] 代码已验证
- [ ] 多重签名钱包设置（⚠️ 强烈建议）
- [x] 时间锁配置
- [x] 紧急暂停机制
- [ ] 监控系统就绪（⚠️ 建议）

### 3.2 环境配置

- [ ] 更新 `.env` 文件
- [ ] 配置 `BSC_MAINNET_RPC`
- [ ] 配置 `PRIVATE_KEY`（建议使用多重签名钱包）
- [ ] 配置 `BSCSCAN_API_KEY`

### 3.3 账户准备

- [ ] 准备主网部署账户
- [ ] 检查账户余额（需要至少 0.5-1 BNB）
- [ ] 确认使用多重签名钱包（⚠️ 强烈建议）

### 3.4 部署命令

```bash
cd packages/contracts
pnpm deploy:mainnet
```

### 3.5 部署后操作

- [ ] 立即验证所有合约
- [ ] 转移 Timelock 所有权到多重签名钱包
- [ ] 设置监控和告警
- [ ] 创建初始池子
- [ ] 添加初始流动性
- [ ] 更新前端配置

---

## 🔒 安全提醒

### 部署前

1. ⚠️ **备份私钥** - 确保私钥安全备份
2. ⚠️ **检查余额** - 确保有足够的 BNB
3. ⚠️ **多重签名** - 主网部署建议使用多重签名钱包
4. ⚠️ **测试网验证** - 先在测试网完整测试

### 部署后

1. ⚠️ **转移所有权** - 将 Timelock 所有权转移到多重签名钱包
2. ⚠️ **保存地址** - 保存所有合约地址和部署信息
3. ⚠️ **设置监控** - 设置合约监控和异常告警
4. ⚠️ **文档更新** - 更新前端配置和文档

---

*最后更新：2025年*

